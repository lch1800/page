<!-- 예: pages/page1/index.html -->
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page 2</title>
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/main_banner.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/signature.css">
    <link rel="stylesheet" href="css/whyChoos.css">
    <link rel="stylesheet" href="css/clientReviews.css">
    <link rel="stylesheet" href="css/featuredIn.css">
    <link rel="stylesheet" href="css/common.css">
</head>

<body>
    <div class="page-container">
        <header class="header">
            <div id="header-container"></div>
        </header>
        <div class="main-banner">
            <div id="main_banner-container"></div>
        </div>
        <div id="signature-container"></div>
        <div id="whyChoos-container"></div>
        <div id="clientReviews-container"></div>
        <div id="featuredIn-container"></div>
        <div id="footer-container"></div>
    </div>

    <script>
        async function loadComponent(component) {
            try {
                console.log(`Loading component: ${component}`);
                const response = await fetch(`components/${component}.html`);
                if (!response.ok) {
                    throw new Error(`Failed to load ${component}: ${response.statusText}`);
                }
                const html = await response.text();

                const container = document.getElementById(`${component}-container`);
                if (container) {
                    container.innerHTML = html;

                    // 각 컴포넌트별 스크립트 로드 및 초기화
                    switch (component) {
                        case 'main_banner':
                            const bannerScript = document.createElement('script');
                            bannerScript.src = 'js/main_banner.js';
                            bannerScript.onload = () => {
                                console.log('main_banner.js loaded successfully');
                                new MainBanner();
                            };
                            document.body.appendChild(bannerScript);
                            break;
                        case 'header':
                            const headerScript = document.createElement('script');
                            headerScript.src = 'js/header.js';
                            headerScript.onload = () => {
                                console.log('header.js loaded successfully');
                                new Header();
                            };
                            document.body.appendChild(headerScript);
                            break;

                        case 'signature':
                            const signatureScript = document.createElement('script');
                            signatureScript.src = 'js/signature.js';
                            signatureScript.onload = () => {
                                console.log('signature.js loaded successfully');
                                if (typeof initSignature === 'function') {
                                    initSignature();
                                } else {
                                    console.warn('initSignature function not found');
                                }
                            };
                            document.body.appendChild(signatureScript);
                            break;
                        case 'whyChoos':
                            const whyChoosScript = document.createElement('script');
                            whyChoosScript.src = 'js/whyChoos.js';
                            whyChoosScript.onload = () => {
                                console.log('whyChoos.js loaded successfully');
                                if (typeof initWhyChoos === 'function') {
                                    initWhyChoos();
                                } else {
                                    console.warn('initWhyChoos function not found');
                                }
                            };
                            document.body.appendChild(whyChoosScript);
                            break;
                        case 'clientReviews':
                            const clientReviewsScript = document.createElement('script');
                            clientReviewsScript.src = 'js/clientReviews.js';
                            clientReviewsScript.onload = () => {
                                console.log('clientReviews.js loaded successfully');
                                if (typeof initClientReviews === 'function') {
                                    initClientReviews();
                                } else {
                                    console.warn('initClientReviews function not found');
                                }
                            };
                            document.body.appendChild(clientReviewsScript);
                            break;
                        case 'featuredIn':
                            const featuredInScript = document.createElement('script');
                            featuredInScript.src = 'js/featuredIn.js';
                            featuredInScript.onload = () => {
                                console.log('featuredIn.js loaded successfully');
                                if (typeof initFeaturedIn === 'function') {
                                    initFeaturedIn();
                                } else {
                                    console.warn('initFeaturedIn function not found');
                                }
                            };
                            document.body.appendChild(featuredInScript);
                            break;

                        default:
                            console.log(`No specific script initialization required for ${component}`);
                    }

                } else {
                    console.error(`Container not found for ${component}`);
                }
            } catch (error) {
                console.error(`Error loading component ${component}:`, error);
            }
        }

        // 컴포넌트 순차적으로 로드
        async function loadAllComponents() {
            console.log('Starting to load all components');
            await loadComponent('header');
            await loadComponent('main_banner');
            await loadComponent('signature');
            await loadComponent('whyChoos');
            await loadComponent('clientReviews');
            await loadComponent('featuredIn');
            await loadComponent('footer');
            console.log('All components loaded');
        }

        // 페이지 로드 시 실행
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM Content Loaded');
            loadAllComponents();
        });
    </script>
</body>

</html>