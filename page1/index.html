<!-- 예: pages/page1/index.html -->
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page 1</title>
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/main_banner.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/heroSection.css">
    <link rel="stylesheet" href="css/team.css">
    <link rel="stylesheet" href="css/cta.css">
    <link rel="stylesheet" href="css/location.css">
</head>

<body>
    <div id="header-container"></div>
    <div class="page-content">
        <div id="main_banner-container"></div>
        <div id="heroSection-container"></div>
        <div id="team-container"></div>
        <div id="cta-container"></div>
        <div id="location-container"></div>
        <div id="footer-container"></div>
    </div>

    <script>
        async function loadComponent(component) {
            try {
                console.log(`Loading component: ${component}`);
                const response = await fetch(`components/${component}.html`);
                if (!response.ok) {
                    throw new Error(`Failed to load ${component}: ${response.statusText}`);
                }
                const html = await response.text();

                const container = document.getElementById(`${component}-container`);
                if (container) {
                    container.innerHTML = html;

                    // 각 컴포넌트별 스크립트 로드 및 초기화
                    switch (component) {
                        case 'main_banner':
                            const bannerScript = document.createElement('script');
                            bannerScript.src = 'js/main_banner.js';
                            bannerScript.onload = () => {
                                console.log('main_banner.js loaded successfully');
                                new MainBanner();
                            };
                            document.body.appendChild(bannerScript);
                            break;

                        case 'common':
                            const commonScript = document.createElement('script');
                            commonScript.src = 'js/common.js';
                            commonScript.onload = () => {
                                console.log('common.js loaded successfully');
                                if (typeof initCommon === 'function') {
                                    initCommon();
                                } else {
                                    console.warn('initCommon function not found');
                                }
                            };
                            document.body.appendChild(commonScript);
                            break;

                        case 'cta':
                            const ctaScript = document.createElement('script');
                            ctaScript.src = 'js/cta.js';
                            ctaScript.onload = () => {
                                console.log('cta.js loaded successfully');
                                if (typeof initCta === 'function') {
                                    initCta();
                                } else {
                                    console.warn('initCta function not found');
                                }
                            };
                            document.body.appendChild(ctaScript);
                            break;

                        case 'heroSection':
                            const heroSectionScript = document.createElement('script');
                            heroSectionScript.src = 'js/heroSection.js';
                            heroSectionScript.onload = () => {
                                console.log('heroSection.js loaded successfully');
                                if (typeof initHeroSection === 'function') {
                                    initHeroSection();
                                } else {
                                    console.warn('initHeroSection function not found');
                                }
                            };
                            document.body.appendChild(heroSectionScript);
                            break;
                        case 'header':
                            const headerScript = document.createElement('script');
                            headerScript.src = 'js/header.js';
                            headerScript.onload = () => {
                                console.log('header.js loaded successfully');
                                if (typeof initHeader === 'function') {
                                    initHeader();
                                } else {
                                    console.warn('initHeader function not found');
                                }
                            };
                            document.body.appendChild(headerScript);
                            break;

                        default:
                            console.log(`No specific script initialization required for ${component}`);
                    }

                } else {
                    console.error(`Container not found for ${component}`);
                }
            } catch (error) {
                console.error(`Error loading component ${component}:`, error);
            }
        }

        // 컴포넌트 순차적으로 로드
        async function loadAllComponents() {
            console.log('Starting to load all components');
            await loadComponent('header');
            await loadComponent('main_banner');
            await loadComponent('heroSection');
            await loadComponent('team');
            await loadComponent('cta');
            await loadComponent('location');
            await loadComponent('footer');
            console.log('All components loaded');
        }

        // 페이지 로드 시 실행
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM Content Loaded');
            loadAllComponents();
        });
    </script>
</body>

</html>